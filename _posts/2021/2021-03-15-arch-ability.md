---
layout: post
title: 架构能力总结
category: arch
tags: [arch]
---

架构能力总结

## 1. 架构基本理论
### 1.1 架构设计方法
![](http://note.youdao.com/yws/public/resource/e1dd6b6f249f03865026a9935f82a4bb/xmlnote/WEBRESOURCE10fdd6fc4ac6d69d9eb7fe3db1353fed/53070)
- 4+1视图法
- 5视图法
    - "逻辑架构"（业务架构、应用架构）
    - "运行架构"
    - "开发架构"（技术架构）
    - "数据架构"
    - "物理架构"（部署架构）
- TOGAF
- DODAF
- 架构风格： 数据流风格、复制风格、分层风格、移动代码风格、点对点风格、分布式风格
	
### 1.2 数据一致性[设计](https://www.jianshu.com/p/ac0a8363c23d)
- C、A、P：一致性Consistency、可用性Availability、分区容错性Partition tolerance
- BA、S、E：保证服务基本可用Basically Available、柔性状态Soft state、最终一致性Eventually consistent
- 2PC：
	- 第一阶段：准备阶段(投票阶段)
	- 第二阶段：提交阶段（执行阶段）
- 3PC：
	- CanCommit、
	- PreCommit(undo和redo信息记录到事务日志中)、
	- DoCommit
- 事务ACID：原子性、一致性、隔离性、持久性

### 1.3 可用性设计
- MTBF
- MTTR
- 主从、热备、灾备

### 1.4 可靠性设计：高性能
- 集群、
- 分布式

### 1.5 扩展性设计
    
### 架构设计其他属性
- 可伸缩
- 简单性
- 可修改性 
- 可移植性 

### 架构设计的关注点
- "结构"
    - 子系统
    - 子系统模块
    - 使用的公用组件
    - 与外部系统关系
    - 部署方式
    - 类似UML组件图描述内容
- "行为"
    - 组件间交互方式
    - 组件间交互过程
    - 类似UML时序图描述内容
- "重要因素"
    - 只关注重要因素，不关注其他因素
    - 判断标准
        - 独特点（业务因素）
        - 创建和改变的的开销大小（经济因素）
        - 业务重点
        - 技术难点
    - 所有重要因素合一起，即系统的抽象
    - 若重要因素选取适当，今后需求改动，系统改动较小，是衡量优秀架构的标准
- "架构风格"
    - 架构风格类似设计模式
    - 一个系统可以使用多个架构风格
    - 利用架构风格可以使架构师的生活变得更容易一些
        - 不需要多考虑风险，一般经过实践验证的
        - 不需要描述文档，每种风格都备有描述文档
    - 常见风格
        - 分布式风格、管道和过滤器风格、
- "利益相关者": 每个角色都关注系统不同特性，甚至大多数是非功能方面的，架构师需要与这些因素权衡 
    - 最终用户
    - 系统管理员
    - 消费者
    - 市场人员。销售人员
    - 开发人员（包括架构师自己）
    - 开发团队管理人员
    - 开发团队维护人员

## 2. 架构设计能力
### 2.1 面向对象程序设计（类设计原则、设计模式）
- 设计原则（类设计）
- 设计模式

### 2.2 算法设计

### 2.3 数据库设计
- 表字段设计、关联设计、外键设计
- 冗余设计
- 索引设计
- 增量设计
- 非结构化存储设计

### 2.4 性能设计
- 代码级别
    - 并发：多线程、乐观锁、悲观锁
    - 数据库索引
    - 全文检索
    - 优化算法、数据结构
    - IO优化
- 系统架构
    - 缓存技术
    - 池技术
    - 预计算
    - 异步化
    - 动静分离
    - 读写分离
    - 分区、分库、分表
    - 消息队列
    - 分布式、微服务、集群 
- 提升硬件：cpu、内存、网卡、磁盘

### 2.5 安全设计
- 安全风险
    - xss
    - CSRF
    - session超期
    - 越权访问
    - https
    - sql注入
    - 页面敏感信息隐位
- 应对方案
- 安全规范：总结风险及对应方案，作为开发规范要求点
- 安全框架
    - SpringSecurity
    - Shiro
- 加密算法
    - 签名：
    - 摘要算法：MD5算法、SHA算法
    - 编码和解码：Base64编码、Hex十六进制编码
    - 对称加密：DES算法、AES算法
    - 非对称加密：RSA算法、SM4
- 认证与授权
    - 用户密码
    - 万能key
    - 特殊令牌
    - token
    - JWT：Json Web Token
    - SSO：单点登录
    - OAth认证
- 防攻击
    - 防恶意请求
    - 防sql注入
    - 防跨站请求伪造

### 2.6 高并发、高可用方案设计
- 集群、分布式、微服务架构设计
- LVS+Keepalived+Nginx实现高可用服务集群
- 主从复制高可用Redis集群
- Mycat配置主从复制高可用mysql 
- 高并发下服务降级、限流方案
- CND加速静态文件访问
- 应用容灾及机房规划
- 系统扩容机制

### 2.7 技术架构选型
- [1.常规单体架构-技术选型]()  
- [2.微服务架构-技术栈选型]()  
- [3.DevOps-技术选型]()

#### 选型参照因素
- 切合业务
- 社区活跃度
- 团队技术水平
- 版本更新迭代周期
- 试错精神
- 安全性
- 成功案例
- 开源精神

## 3. 设计文档
### 3.1 系统总体（架构）设计文档

### 3.2 概要设计文档

### 3.3 详细设计文档

### 扩展：UML统一建模语言(Unified Modeling Language)
- 用例图：角色以及角色与用例之间的连接关系 
- 类图：类，类、接口之间的关系的静态视图。 
- 对象图：对象之间的关系
- 包图：
- 活动图：描述用例所要进行的活动，及活动间的约束关系 
- 状态图：描述对象所有可能的状态，及状态的转移条件
- 序列图(顺序图)：参与者如何以一系列顺序的步骤与系统的对象交互的模型。 
- 协作图：和序列图相似，显示对象间的动态合作关系
- 构件图(组件图)：描述代码构件的物理结构及各种构建间依赖关系。 
- 部署(配置图)：用来建模系统的物理部署。 

## 4. 分布式架构
### 4.1 分布式中间件
#### 分布式消息中间件：kafka
#### 分布式缓存：Redis
#### 分布式数据库:　mycat
#### 分布式服务：Dubbo
#### 注册中心: zookeeper
#### 分布式文件系统：MongoDB
#### 分布式文件存储服务：Minio/Fastdfs
#### 负载均衡、限流：Nginx
#### 高性能NIO框架：Netty
#### 分布式日志搜索引擎：ELK

### 4.2 分布式解决方案
#### session会话保持方案、跨域共享、企业级单点登录方案
- 代理
- session复制
- session绑定
- 客户端缓存
- session服务器-靠谱

#### 分布式全局id生成方案

#### 分布式事务解决方案
- 分布式事务框架LCN
- 阿里开源分布式事务框架FESCR
- 柔性事务和刚性事务
- TCC补偿机制

#### 分布式锁解决方案
- 基于数据库
    - 基于表字段版本号做分布式锁
    - 基于数据库排他锁做分布式锁
- 基于Redis实现
    - 基于 REDIS 的 SETNX()、EXPIRE() 做分布式锁
    - 基于 REDIS 的 SETNX()、GET()、GETSET()做分布式锁
    - 基于 REDLOCK 做集群模式的 Redis 分布式锁
- 基于zookeeper实现

#### 负分布式载均衡方案
- 硬件: F5
- 软件: LVS、Nginx、HAProxy、Ribbon

#### 分布式任务调度方案
- Quartz
- xxl-job
- elastic-job
- saturn
- TBSchedule

#### 分布式RPC通信解决方案：
- 基于消息方式的系统间通信
- 基于框架RPC通信
	- Webservice-CXF实现
	- RMI-Spring RMI实现
	- Hessian
- 从网络通信探究分布式通信原理
- 理解通信协议传输过程中的序列化反序列化
- 传统RPC技术在分布式下面临的问题

## 5. 微服务架构
### 5.1 微服务本质：适当粒度服务拆分下的分布式开发
- 主流架构模型：SOA架构和微服务架构
- 领域驱动设计及业务驱动划分

### 5.2 微服务架构设计理论
- 微服务开发设计
    - 服务划分、拆分
    - API设计、管理
	- 会话保持方案session: 代理/session复制/session绑定/客户端缓存/session服务器-靠谱
	- 分布式事务
	- 分布式锁
    - 缓存设计
    - MQ设计
- 服务安全
	- OAth认证
	- jwt授权
	- IAM
- 服务运行支撑
    - 服务注册、发现
    - 服务调度
    - 网关
    - 负载均衡
    - 服务配置（配置中心）
- 服务容错
    - 访问控制
    - 限流
    - 降级
    - 超时
    - 隔离
    - 熔断
- 服务监控
    - 日志监控
    - 调用链监控
    - Metrucs监控
    - 告警通知
    - 健康检查
- 服务部署发布
    - 发布机制：蓝绿/金丝雀/灰度
    - docker虚拟化
    - kubemetes
- 服务网格（Service Mesh）

### 5.3 微服务架构实践-框架
#### springboot集成通用功能组件

#### springcloud组件集成
- Eureka注册中心
- Ribbon集成Rest试下负载均衡
- Feign声明式服务调用
- Hystrix服务熔断降级方式
- Zuul实现服务网关
- Config分布式统一配置中心
- actuator服务监控组件
- Sieuth调用链路跟踪
- BUS消息总线 

#### Docker与虚拟化

## 7.并发编程 && JVM

### JAVA内存模型（JMM）
- java当中的线程通讯和消息传递  
- 什么是重排序和顺序一致性？
- Happens-Before？
- As-If-Serial？

### Synchronized的概念和分析
- 同步、重量级锁以及Synchronized的原理分析  
- 自旋锁、偏向锁、轻量级锁、重量级锁的概念、使用以及如何来优化他们

### Volatile和DCL的知识
- Volatile的使用场景和Volatile实现机制、内存语义、内存模型  
- DCL的单例模式，什么是DCL？如何来解决DCL的问题

### 并发基础之AQS的深度分析
- AbstractAueuedSynchronizer同步器的概念、CLH同步队列是什么？  
- 同步状态的获取和释放、线程阻塞和唤醒

### Lock和并发常用工具类
- 锁：Lock、ReentrantLock、ReentrantReadWriteLock、Condition  
- 并发工具类CyclicBarrier、CountDownLatch、Semphore  
- 并发集合类ConcurrentHashMap、ConcurrentLinkedQueue......

### 原子操作常用知识讲解
- 基本类型的原子操作比如经典的AtomicBoolean、AtomicLnteger、AtomicLong  
- 数组类型的原子操作代表几个类AtomicIntegerArray、AtomicLongArray、AtomicReferenceArray  
- 引用类型的原子操作的典型AtomicReference、AtomicReferenceFieldUpdater......  
- CAS的概念和知识、Compare And Swap 以及他的缺陷

### 线程池和并发并行
- Executor
- ThreadPoolExecutor
- Callable & Future
- ScheduledExecutorService  
- ThreadLocal、
- Fork & Join？
- 什么是并行？
- 线程池如何保证核心线程不被销毁？

## 8.框架和源码
### 设计模式 & 设计原则

### spring源码分析 

### mybatis应用和源码解析 

### tomcat源码解析 

### netty源码分析

### redis源码分析

## 9.性能调优
### Mysql性能调优  

### JVM性能调优  

### Java数据结构算法优化  

### Web调优

### Tomcat调优

### Linux服务器调优

## 10.工程化Dev & Ops
### Nexus搭建maven私服

### Gitlab 部署、Gitflow、CI/CD 配置

### jenkins部署、配置项目自动化构建
部署 Spring Boot：http://www.ityouknow.com/springboot/2017/11/11/spring-boot-jenkins.html

### Sonar部署、配置项目git、配置静态代码检查规则

### IDEA破解、设置、使用、常用插件

### Yapi搭建、接口维护

### JIRA搭建、缺陷管理

### Docker & k8s部署、使用

### ELK 部署、使用

### APM 部署、使用

### 11.Linux服务器 & 中间件

#### centos 系统安装

#### jdk 安装、配置

#### tomcat 安装、配置

#### Mysql 安装、配置

#### zookeeper 安装、配置

#### redis 安装、配置

#### kafka 安装、配置

#### mongodb 安装、配置

#### nginx 安装、配置

## 12、架构师主要工作
### 设计、搭建
软件系统架构（平台、数据库、接口和应用架构等），解决开发中各种系统架构问题。

### 核心开发
核心功能模块设计、核心代码开发

### 优化架构
在项目需求不断细化的工程中校正整体的架构设计，以及详细模块拆分设计。

### 攻坚克难
带领团队攻克例如大数据量、高并发、高稳定性等带来的各种挑战及技术难关。

### 优化性能
分析、解决软件系统平台性能问题。

### 流程、规范
带领团队不断完善**开发方法及开发流程**，提升开发效率与质量，加强**技术标准及规范**。

### 技术氛围
营造技术学习氛围，帮助提升团队人员技术成长

### 技术敏感度
参与讨论公司产品发展方向，完整的规划和把握产品研发架构。

### 团队责任
责任心强，有团队合作精神，工作认真负责高效并具有一定抗压能力。

## 13、架构师能力要求
### 架构能力

### 工程能力

### 业务能力
- 行业业务
- 需求捕获、分析
- 总结归纳
- 汇报

### 研发管理能力 

### 文档阅读、编写能力
### 发现、解决问题能力
### 沟通能力
### 学习能力
### 影响力

