---
layout: post
title: Linux安装mysql
category: database
tags: [database]
---

## 数据库建模
[美滋滋的开源数据库模型建模工具！](https://mp.weixin.qq.com/s/dEy_4xyKbn2GfdsGpiyzcQ)


## mysql安装
tar包方式安装，无需依赖外网：  
https://blog.csdn.net/qq_36631900/article/details/102482768  

```
官网下载：https://dev.mysql.com/downloads/mysql/  
1.将下载好的mysql-8.0.17-linux-glibc2.12-x86_64.tar.xz上传到usr/local/mysql目录下(如果没有该目录可以依次建文件夹)

2. .tar.xz解压是  tar -xvf mysql-8.0.17-linux-glibc2.12-x86_64.tar.xz
   .tar.gz解压是  tar -zvxf mysql-8.0.17-linux-glibc2.12-x86_64.tar.xz

// 对mysql进行安装
1.重命名解压文件：进入mysql文件夹执行命令：mv mysql-8.0.17-linux-glibc2.12-x86_64 mysql
移动重命名后文件内的所有文件：进入重名名的mysql文件夹执行命令:mv * usr/local/mysql 
将刚刚空了的mysql文件夹删除；最后的结果mysql可执行文件bin的全路径应该是usr/local/mysql/bin

2.为系统添加mysql 组和用户：groupadd mysql和useradd -r -g mysql mysql

3.进入 /usr/local/mysql 目录下，修改相关权限：chown -R mysql:mysql ./   //修改当前目录为mysql用户

4.如果你/etc下没有my.cnf文件, 新建一个my-defalut.cnf文件,将其复制到/etc/my.cnf
touch my-defalut.cnf //新建一个文件
chmod 755 my-defalut.cnf // 赋予权限
cp my-defalut.cnf /etc/my.cnf // 将文件复制到/etc/ 目录下，并更名为my.cnf 文件名

5.my.cnf 的信息如下
[mysqld]
#设置表名大小写不敏感
lower_case_table_names=1
#设置mysql安装目录
basedir=/usr/local/mysql
#设置mysql数据库的数据存放目录
datadir=/usr/local/mysql/data
port=3306
socket=/tmp/mysql.sock
#设置mysql的日志文件位置（这个配置文件先不要放开，不然会报找不到Mysql.log文件，等启动后再放开，在重启）
#log-error=/var/log/mysql.log
#注意了,小细节，这里的 $hostname 是linux的主机名。一般每个人主机名都是不一样的。
pid-file=/usr/local/mysql/data/$hostname.pid
sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES

6.mysql初始化操作,记录下临时密码,之后第一次登录的时候会用到。
bin/mysqld --initialize --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data
//运行完成会生成一个暂时的密码

7.为mysql配置环境变量。 vim /etc/profile // 打开profile文件在最后追加下面命令
export MYSQL_HOME
MYSQL_HOME=/usr/local/mysql
export PATH=$PATH:$MYSQL_HOME/lib:$MYSQL_HOME/bin

退出后让其立马生效命令：source /etc/profile

8.设置为开机自启动项，依次执行下面代码
cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysql
chmod +x /etc/init.d/mysql  //添加可执行权限。
chkconfig --add mysql  // 注册启动服务
输入chkconfig --list //查看是否添加成功。
 
9.启动msyql，并登陆
service mysql start //开启服务器。

注意：如果启动报了pid找不到的错误，直接把my.cnf中pid-file=/usr/local/mysql/data/$hostname.pid删掉，在启动就可以了

mysql -uroot -p //登录进入mysql，然后提示输入密码。

10.输入初始化过程中生成的临时密码，然后回车就行。进入一下页面。

11.进入mysql后，修改密码。不然你什么也做不了。
alter user 'root'@'localhost' identified by 'your_password';
其中'your_password'是你设置的新密码

11.创建远程操作账户，进行远程访问的授权,并更新权限，依次执行以下代码：
create user 'root'@'%' identified with mysql_native_password by '123456';
grant all privileges on *.* to 'root'@'%' with grant option;
flush privileges;

备注：如果创建远程账号的密码错了，修改方法点击这里https://blog.csdn.net/qq_36631900/article/details/103404515

12.本地用telnet连接测试下能否连接，命令是：telnet 你安装数据库的服务器ip 3306
如果直接进入全黑界面，这就代表远程访问成功，或者你也可以用navicat连接尝试
```